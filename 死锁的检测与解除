死锁的检测与解除

死锁的检测：
  1. 允许死锁发生，但是操作系统会不断监视系统进展情况，判断死锁是否真的发生
  2. 一旦死锁发生则采取专门的措施，解除死锁并以最小的代价恢复操作系统运行
检测时机：
  1. 当进程犹豫资源请求不满足而等待检测死锁（缺点：系统开销大）
  2. 定时检测
  3. 系统资源利用率下降时检测死锁

  一个简单的死锁检测算法
  * 每个进程，每个资源指定唯一编号
  * 设置一张资源分配表，记录各个进程与其占用资源之间的关系
  * 设置一张进程等待表，记录各个进程与要申请资源之间的关系
如果等待序列出现环路，则会发生死锁现象
例如：
资源分配表（r1,p1),(r2,p5),(r3,p4),(r4,p1)...
进程等待表（p1,r1),(p2,r3),(p4,r4),...
则等待序列 p1->r1->p2->r3->p4->r4->p1 (出现环路，死锁发生）

死锁的解除：
重要的是以最小的代价恢复系统的运行，方法如下几种：
1. 撤销所有死锁进程
2. 进程回退（roll back)再启动
3. 按照某种原则逐一撤销死锁进程，知道...
4. 按照某种原则逐一抢占资源（资源被抢占的进程必须回退到之前的对应状态）,直到...
  
  
